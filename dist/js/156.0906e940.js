"use strict";(self["webpackChunkalphitter"]=self["webpackChunkalphitter"]||[]).push([[156],{51283:(t,s,e)=>{e.d(s,{Z:()=>d});var i=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"navbar-container"}},[t.isModalShown?s("PopoutWritingTweet",{attrs:{"show-modal":t.showModal,"close-modal":t.closeModal}}):t._e(),s("img",{staticClass:"logo-img",attrs:{src:e(82374),alt:""}}),[s("ul",{staticClass:"nav-list"},[s("li",[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-main"}}},[t.isTweetsList?s("div",{staticClass:"icon-container"},[s("img",{staticClass:"icon-size house-icon",attrs:{src:e(93097),alt:"houseActive"}})]):s("div",{staticClass:"icon-container"},[s("img",{staticClass:"icon-size house-icon",attrs:{src:e(13366),alt:"house"}})]),t.isTweetsList?s("span",{staticClass:"navbar-index-active"},[t._v(" 推文清單 ")]):s("span",{staticClass:"navbar-index"},[t._v(" 推文清單 ")])])],1),s("li",[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-users"}}},[t.isUsersList?s("div",{staticClass:"icon-container"},[s("img",{staticClass:"icon-size profile-icon",attrs:{src:e(44866),alt:""}})]):s("div",{staticClass:"icon-container"},[s("img",{staticClass:"icon-size profile-icon",attrs:{src:e(7504),alt:""}})]),t.isUsersList?s("span",{staticClass:"navbar-index-active"},[t._v(" 使用者列表 ")]):s("span",{staticClass:"navbar-index"},[t._v(" 使用者列表 ")])])],1)])],t.isAuthenticated?[s("ul",{staticClass:"nav-list nav-list-bottom"},[s("li",[s("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._m(0),s("span",{staticClass:"navbar-index",on:{click:t.logout}},[t._v(" 登出 ")])])])])]:t._e()],2)},a=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"icon-container"},[s("img",{staticClass:"icon-size logout-icon",attrs:{src:e(31168),alt:""}})])}],n=e(4648),r=e(63822);const c={props:{initialTweetsList:{type:Boolean,default:!1},initialUsersList:{type:Boolean,default:!1}},data:function(){return{isTweetsList:this.initialTweetsList,isUsersList:this.initialUsersList}},computed:(0,n.Z)({},(0,r.rn)(["currentUser","isAuthenticated"])),watch:{initialTweetsList:function(t){this.isTweetsList=t},initialUsersList:function(t){this.isUsersList=t}},methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/login")}}},o=c;var l=e(1001),u=(0,l.Z)(o,i,a,!1,null,null,null);const d=u.exports},18156:(t,s,e)=>{e.r(s),e.d(s,{default:()=>L});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"d-flex justify-content-center"},[s("AdminNav",{attrs:{"initial-tweets-list":t.isTweetsList}}),s("div",{staticClass:"admin-main-wrapper"},[s("NavpillHeaderMain",{attrs:{"initial-admin-main":t.isAdminMain}}),s("div",{staticClass:"container-for-scroll scrollbar"},[s("AdminTweetElement")],1)],1)],1)},a=[],n=e(51283),r=e(75568),c=(e(68309),e(82526),e(41817),function(){var t=this,s=t._self._c;return s("div",[t.isLoading?s("LoadingSpinner"):t._l(t.tweets,(function(i){return s("div",{key:i.id},[s("div",{attrs:{id:"admin-tweet-element-container"}},[s("img",{staticClass:"user-headshot",attrs:{src:t._f("emptyImage")(i.User.avatar),alt:"個人頭像"}}),s("div",{staticClass:"ml-2"},[s("div",{staticClass:"d-flex"},[s("span",{staticClass:"user-name"},[t._v(" "+t._s(i.User.name)+" ")]),s("span",{staticClass:"user-acount-for-post ml-2"},[s("span",[t._v("@")]),t._v(" "+t._s(i.User.account)+" "),s("span",[t._v(" • ")])]),s("p",{staticClass:"post-time"},[t._v(" "+t._s(t._f("fromNow")(i.createdAt))+" ")])]),s("p",{staticClass:"tweet-content mt-2"},[t._v(" "+t._s(i.description)+" ")])]),s("button",{on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteTweet(i.id,i.description,i.User.account,i.User.avatar)}}},[s("img",{staticClass:"delete-icon-size",attrs:{src:e(5521),alt:"delete-icon"}})])])])}))],2)}),o=[],l=e(4648),u=e(50124),d=e(48534),m=(e(57327),e(41539),e(21249),e(76163)),v=e(88431),A=e(77214),p=e(83459),f=e(69238);const w={name:"AdminTweetElement",components:{LoadingSpinner:f.Z},mixins:[p.qk,p.Lf],data:function(){return{tweets:[],isProcessing:!1,isLoading:!0}},watch:{},created:function(){this.fetchTweets()},methods:{deleteTweet:function(t,s,e,i){var a=this;return(0,d.Z)((0,u.Z)().mark((function n(){var r,c,o;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,r=i||"https://loremflickr.com/100/100/avatar/?random=${Math.random()*100}",n.next=4,m.Sw.fire({icon:"question",imageUrl:"".concat(r),imageWidth:80,imageHeight:80,title:"你想刪除 @".concat(e," 的這篇"),text:"".concat(s," 推文嗎？")});case 4:if(c=n.sent,!0!==c.value){n.next=12;break}return n.next=8,A.Z.deleteTweet({tweetId:t});case 8:o=n.sent,"error"!==o.status&&(m.FN.fire({icon:"success",title:"刪除推文成功"}),a.tweets=a.tweets.filter((function(s){return s.id!==t}))),n.next=13;break;case 12:console.log("no");case 13:n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](0),m.FN.fire({icon:"error",title:"無法刪除推文，請稍後再試"});case 18:case"end":return n.stop()}}),n,null,[[0,15]])})))()},fetchTweets:function(){var t=this;return(0,d.Z)((0,u.Z)().mark((function s(){var e;return(0,u.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.isLoading=!0,s.next=4,v.Z.getTweets();case 4:e=s.sent,t.tweets=e.data.map((function(t){return(0,l.Z)((0,l.Z)({},t),{},{description:t.description?t.description.substring(0,50):""})})),t.isLoading=!1,s.next=14;break;case 9:s.prev=9,s.t0=s["catch"](0),console.error(s.t0.message),t.isLoading=!1,m.FN.fire({icon:"error",title:"無法取得 Tweets 資料"});case 14:case"end":return s.stop()}}),s,null,[[0,9]])})))()}}},h=w;var C=e(1001),g=(0,C.Z)(h,c,o,!1,null,null,null);const x=g.exports,k={name:"AdminMain",components:{AdminNav:n.Z,NavpillHeaderMain:r.Z,AdminTweetElement:x},data:function(){return{isTweetsList:!0,isAdminMain:!0}},created:function(){},methods:{}},U=k;var _=(0,C.Z)(U,i,a,!1,null,null,null);const L=_.exports},5521:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFZSURBVHgBxdc9TsMwFAfw9+wL9AjcAVaQ4AS9QctAdxYEgqFDEYzMMBAu0qkrCG4AN+AC2NihRq4bfzznRf0PkT/S/OooeUkAdhS0m9nFYqJQPJjONwo1f7y7eYEB4jvCDmgUc9MZmeaeVqKZXS0mwByLGqdxjliPj/yduHGH+mN/MOrzcGcuvAu1kXbztlq+7x+efJl/MN7UcXxwdPz5ulp+ACNqFnoqXZsbT6FP99eN9Me48BxqmzKc64uXoJ1wH7wUjcI1OAVNwhScirZTUJCzy9upwZ63fizUFH7aytdQ0GI4hXcfNY3aJE+1n+hpr0BJcBFeiNoIIAaV1tE5jM+FIa04evW6ECpcMZxFiXjRVZ26T9dY562WepPJrjhXHGrLq+yDum4NLvuitbjkQGtwyYVSccmJUnDkRv2knmo4FJrD/78kYADUpj2GKzQhDMGXBBeawn8BRbV6mndFIpEAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=156.0906e940.js.map