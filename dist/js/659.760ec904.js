"use strict";(self["webpackChunkalphitter"]=self["webpackChunkalphitter"]||[]).push([[659],{17659:(t,e,s)=>{s.r(e),s.d(e,{default:()=>m});s(68309);var r=function(){var t=this,e=t._self._c;return e("div",t._l(t.followings,(function(s){return e("div",{key:s.followingId,attrs:{id:"user-follower-list-container"}},[s.isFollowed?e("button",{staticClass:"user-follow-btn empty-btn-style-active",attrs:{type:"submit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.removeFollowing(s.followingId)}}},[t._v(" 正在跟隨 ")]):e("button",{staticClass:"user-follow-btn empty-btn-style",attrs:{type:"submit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addFollowing(s.followingId)}}},[t._v(" 跟隨 ")]),t.currentUser.id===s.followingId?e("router-link",{attrs:{to:{name:"user-tweets"}}},[e("img",{staticClass:"user-headshot",attrs:{src:t._f("emptyImage")(s.avatar),alt:"個人頭像"}})]):e("router-link",{attrs:{to:{name:"user-id-tweets",params:{userId:s.followingId}}}},[e("img",{staticClass:"user-headshot",attrs:{src:t._f("emptyImage")(s.avatar),alt:"個人頭像"}})]),e("div",{staticClass:"ml-2"},[t.currentUser.id===s.followingId?e("router-link",{attrs:{to:{name:"user-tweets"}}},[e("span",{staticClass:"user-name"},[t._v(" "+t._s(s.name)+" ")]),e("div",{staticClass:"user-acount"},[e("span",[t._v("@")]),t._v(" "+t._s(s.account)+" ")]),e("p",{staticClass:"tweet-content mt-4"},[t._v(" "+t._s(s.introduction)+" ")])]):e("router-link",{attrs:{to:{name:"user-id-tweets",params:{userId:s.followingId}}}},[e("span",{staticClass:"user-name"},[t._v(" "+t._s(s.name)+" ")]),e("div",{staticClass:"user-acount"},[e("span",[t._v("@")]),t._v(" "+t._s(s.account)+" ")]),e("p",{staticClass:"tweet-content mt-4"},[t._v(" "+t._s(s.introduction)+" ")])])],1)],1)})),0)},n=[],o=s(50124),i=s(48534),a=s(4648),l=(s(38862),s(26833),s(83459)),c=s(76163),u=s(78390),f=s(63822);const w={name:"UserFollowingList",mixins:[l.Lf],props:{initialFollowings:{type:Array,required:!0}},data:function(){return{followings:this.initialFollowings}},computed:(0,a.Z)({},(0,f.rn)(["currentUser"])),watch:{initialFollowings:function(t){this.followings=(0,a.Z)((0,a.Z)({},this.followings),t),this.followings=t}},methods:{addFollowing:function(t){var e=this;return(0,i.Z)((0,o.Z)().mark((function s(){var r,n,i,a,l,f,w;return(0,o.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,t!==e.currentUser.id){s.next=4;break}return c.FN.fire({icon:"error",title:"無法跟隨自己"}),s.abrupt("return");case 4:return e.isProcessing=!0,s.next=7,u.Z.addFollowing({userId:t});case 7:r=s.sent,n=r.data,console.log("data=",n),i=JSON.parse(JSON.stringify(e.followings)),a=Object.values(i),l=0,f=a;case 13:if(!(l<f.length)){s.next=21;break}if(w=f[l],w.followingId!==t){s.next=18;break}return w.isFollowed=!0,s.abrupt("break",21);case 18:l++,s.next=13;break;case 21:e.followings=a,e.$emit("fromFollowingList"),e.isProcessing=!1,s.next=31;break;case 26:s.prev=26,s.t0=s["catch"](0),console.error(s.t0.message),e.isProcessing=!1,c.FN.fire({icon:"error",title:"目前無法跟隨使用者，請稍後再試"});case 31:case"end":return s.stop()}}),s,null,[[0,26]])})))()},removeFollowing:function(t){var e=this;return(0,i.Z)((0,o.Z)().mark((function s(){var r,n,i,a,l,f,w;return(0,o.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isProcessing=!0,s.next=4,u.Z.removeFollowing({userId:t});case 4:r=s.sent,n=r.data,console.log("data=",n),i=JSON.parse(JSON.stringify(e.followings)),a=Object.values(i),l=0,f=a;case 10:if(!(l<f.length)){s.next=18;break}if(w=f[l],w.followingId!==t){s.next=15;break}return w.isFollowed=!1,s.abrupt("break",18);case 15:l++,s.next=10;break;case 18:e.followings=a,e.$emit("fromFollowingList"),e.isProcessing=!1,s.next=28;break;case 23:s.prev=23,s.t0=s["catch"](0),console.error(s.t0.message),e.isProcessing=!1,c.FN.fire({icon:"error",title:"目前無法取消跟隨使用者，請稍後再試"});case 28:case"end":return s.stop()}}),s,null,[[0,23]])})))()}}},g=w;var d=s(1001),p=(0,d.Z)(g,r,n,!1,null,null,null);const m=p.exports}}]);
//# sourceMappingURL=659.760ec904.js.map