{"version":3,"file":"js/780.15c835c6.js","mappings":"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","sources":["webpack://alphitter/./src/components/UserPostList.vue","webpack://alphitter/src/components/UserPostList.vue","webpack://alphitter/./src/components/UserPostList.vue?8721","webpack://alphitter/./src/components/UserPostList.vue?7c3e"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',_vm._l((_vm.tweets),function(tweet){return _c('div',{key:tweet.id,attrs:{\"id\":\"user-post-list-container\"}},[(tweet.isCurrentUser)?_c('router-link',{attrs:{\"to\":{\r\n          name: 'user-tweets' // 導引至 UserSelf.vue\r\n        }}},[_c('img',{staticClass:\"user-headshot\",attrs:{\"src\":_vm._f(\"emptyImage\")(tweet.User.avatar),\"alt\":\"個人頭像\"}})]):_c('router-link',{attrs:{\"to\":{\r\n          name: 'user-id-tweets', // 導引至 UserOther.vue\r\n          params: { userId: tweet.UserId }\r\n        }}},[_c('img',{staticClass:\"user-headshot\",attrs:{\"src\":_vm._f(\"emptyImage\")(tweet.User.avatar),\"alt\":\"個人頭像\"}})]),_c('div',{staticClass:\"tweet-wrapper ml-2\"},[_c('div',{staticClass:\"d-flex align-items-center\"},[(tweet.isCurrentUser)?_c('router-link',{staticClass:\"user-name\",attrs:{\"to\":{\r\n              name: 'user-tweets' // 導引至 UserSelf.vue\r\n            }}},[_vm._v(\" \"+_vm._s(tweet.User.name)+\" \"),_c('span',{staticClass:\"user-acount-for-post ml-2\"},[_c('span',[_vm._v(\"@\")]),_vm._v(\" \"+_vm._s(tweet.User.account)+\" \"),_c('span',[_vm._v(\" • \")])])]):_c('router-link',{staticClass:\"user-name\",attrs:{\"to\":{\r\n              name: 'user-id-tweets', // 導引至 UserOther.vue\r\n              params: { userId: tweet.UserId }\r\n            }}},[_vm._v(\" \"+_vm._s(tweet.User.name)+\" \"),_c('span',{staticClass:\"user-acount-for-post ml-2\"},[_c('span',[_vm._v(\"@\")]),_vm._v(\" \"+_vm._s(tweet.User.account)+\" \"),_c('span',[_vm._v(\" • \")])])]),_c('p',{staticClass:\"post-time\"},[_vm._v(\" \"+_vm._s(_vm._f(\"fromNow\")(tweet.createdAt))+\" \")])],1),_c('router-link',{attrs:{\"to\":{\r\n            name: 'replylist',\r\n            query: {\r\n              tweetId: tweet.id\r\n            }\r\n          }}},[_c('p',{staticClass:\"tweet-content mt-2\"},[_vm._v(\" \"+_vm._s(tweet.description)+\" \")])]),_c('div',{staticClass:\"tweet-icon-show-pannel d-flex mt-1\"},[_c('button',{staticClass:\"d-flex align-items-center\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.showModal(tweet.id, tweet.User.avatar, tweet.User.name, tweet.User.account, tweet.createdAt, tweet.description)}}},[_c('img',{staticClass:\"tweet-icon-show\",attrs:{\"src\":require(\"../assets/reply.png\"),\"alt\":\"回覆按鈕\"}}),_c('span',{staticClass:\"reply-number ml-1\"},[_vm._v(\" \"+_vm._s(tweet.replyCount)+\" \")])]),_c('div',{staticClass:\"d-flex align-items-center ml-8\"},[(tweet.isLiked)?_c('button',[_c('img',{staticClass:\"tweet-icon-show\",attrs:{\"src\":require(\"../assets/likedx2.png\"),\"alt\":\"likedx2.png\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.unLike(tweet.id)}}})]):_c('button',[_c('img',{staticClass:\"tweet-icon-show\",attrs:{\"src\":require(\"../assets/like.png\"),\"alt\":\"like.png\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addLike(tweet.id)}}})]),_c('span',{staticClass:\"like-number ml-1\"},[_vm._v(\" \"+_vm._s(tweet.likeCount)+\" \")])])])],1)],1)}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div\r\n      v-for=\"tweet in tweets\"\r\n      id=\"user-post-list-container\"\r\n      :key=\"tweet.id\"\r\n    >\r\n      <router-link\r\n        v-if=\"tweet.isCurrentUser\"\r\n        :to=\"{\r\n          name: 'user-tweets' // 導引至 UserSelf.vue\r\n        }\"\r\n      >\r\n        <img\r\n          class=\"user-headshot\"\r\n          :src=\"tweet.User.avatar | emptyImage\"\r\n          alt=\"個人頭像\"\r\n        >\r\n      </router-link>\r\n      <router-link\r\n        v-else\r\n        :to=\"{\r\n          name: 'user-id-tweets', // 導引至 UserOther.vue\r\n          params: { userId: tweet.UserId }\r\n        }\"\r\n      >\r\n        <img\r\n          class=\"user-headshot\"\r\n          :src=\"tweet.User.avatar | emptyImage\"\r\n          alt=\"個人頭像\"\r\n        >\r\n      </router-link>\r\n\r\n      <div class=\"tweet-wrapper ml-2\">\r\n        <div class=\"d-flex align-items-center\">\r\n          <router-link\r\n            v-if=\"tweet.isCurrentUser\"\r\n            :to=\"{\r\n              name: 'user-tweets' // 導引至 UserSelf.vue\r\n            }\"\r\n            class=\"user-name\"\r\n          >\r\n            {{ tweet.User.name }}\r\n            <span class=\"user-acount-for-post ml-2\">\r\n              <span>@</span>\r\n              {{ tweet.User.account }}\r\n              <span> • </span>\r\n            </span>\r\n          </router-link>\r\n          <router-link\r\n            v-else\r\n            :to=\"{\r\n              name: 'user-id-tweets', // 導引至 UserOther.vue\r\n              params: { userId: tweet.UserId }\r\n            }\"\r\n            class=\"user-name\"\r\n          >\r\n            {{ tweet.User.name }}\r\n            <span class=\"user-acount-for-post ml-2\">\r\n              <span>@</span>\r\n              {{ tweet.User.account }}\r\n              <span> • </span>\r\n            </span>\r\n          </router-link>\r\n\r\n          <p class=\"post-time\">\r\n            {{ tweet.createdAt | fromNow }}\r\n          </p>\r\n        </div>\r\n\r\n        <router-link\r\n          :to=\"{\r\n            name: 'replylist',\r\n            query: {\r\n              tweetId: tweet.id\r\n            }\r\n          }\"\r\n        >\r\n          <p class=\"tweet-content mt-2\">\r\n            {{ tweet.description }}\r\n          </p>\r\n        </router-link>\r\n\r\n        <div class=\"tweet-icon-show-pannel d-flex mt-1\">\r\n          <button\r\n            class=\"d-flex align-items-center\"\r\n            @click.stop.prevent=\"showModal(tweet.id, tweet.User.avatar, tweet.User.name, tweet.User.account, tweet.createdAt, tweet.description)\"\r\n          >\r\n            <img\r\n              src=\"../assets/reply.png\"\r\n              alt=\"回覆按鈕\"\r\n              class=\"tweet-icon-show\"\r\n            >\r\n            <span class=\"reply-number ml-1\">\r\n              {{ tweet.replyCount }}\r\n            </span>\r\n          </button>\r\n\r\n          <div class=\"d-flex align-items-center ml-8\">\r\n            <button\r\n              v-if=\"tweet.isLiked\"\r\n            >\r\n              <img\r\n                src=\"../assets/likedx2.png\"\r\n                alt=\"likedx2.png\"\r\n                class=\"tweet-icon-show\"\r\n                @click.stop.prevent=\"unLike(tweet.id)\"\r\n              >\r\n            </button>\r\n            <button\r\n              v-else\r\n            >\r\n              <img\r\n                src=\"../assets/like.png\"\r\n                alt=\"like.png\"\r\n                class=\"tweet-icon-show\"\r\n                @click.stop.prevent=\"addLike(tweet.id)\"\r\n              >\r\n            </button>\r\n            <span class=\"like-number ml-1\">\r\n              {{ tweet.likeCount }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { fromNowFilter, emptyImageFilter } from './../utils/mixins'\r\nimport usersAPI from './../apis/users'\r\nimport { Toast } from './../utils/helpers'\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n  name: \"UserPostList\",\r\n  mixins: [fromNowFilter,emptyImageFilter],\r\n  props: {\r\n    initialTweets: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      tweets: this.initialTweets\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['currentUser'])\r\n  },\r\n  watch: {\r\n    initialTweets (newValue) {\r\n      this.tweets = {\r\n        ...this.tweets,\r\n        ...newValue\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    showModal (tweetId, toAvatar, toName, toAccount, toCreatedAt, toDescription) {\r\n      this.$store.commit('setReply', {\r\n        tweetId,\r\n        toAvatar,\r\n        toName,\r\n        toAccount,\r\n        toCreatedAt,\r\n        toDescription,\r\n        myAvatar: this.currentUser.avatar\r\n      })\r\n    },\r\n    async addLike (tweetId) {\r\n      try {\r\n        this.isProcessing = true\r\n        const { data } = await usersAPI.addLike({ tweetId })\r\n        if (data.status === 'error') {\r\n          throw new Error(data.message)\r\n        }\r\n        const obj = JSON.parse(JSON.stringify(this.tweets))\r\n        const arr = Object.values(obj)\r\n        this.tweets = arr.map(t=>{\r\n          if(t.id === tweetId) {\r\n            return {\r\n              ...t,\r\n              isLiked: true,\r\n              likeCount: t.likeCount+1\r\n            }\r\n          } else {\r\n            return t\r\n          }\r\n        })\r\n        this.$emit('updateLikes')\r\n\r\n        this.isProcessing = false\r\n      } catch (error) {\r\n        console.error(error.message)\r\n        this.isProcessing = false\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法對 Tweet 按 Like，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async unLike (tweetId) {\r\n      try {\r\n        this.isProcessing = true\r\n        const { data } = await usersAPI.unLike({ tweetId })\r\n        if (data.status === 'error') {\r\n          throw new Error(data.message)\r\n        }\r\n        const obj = JSON.parse(JSON.stringify(this.tweets))\r\n        const arr = Object.values(obj)\r\n        this.tweets = arr.map(t=>{\r\n          if(t.id === tweetId) {\r\n            return {\r\n              ...t,\r\n              isLiked: false,\r\n              likeCount: t.likeCount-1\r\n            }\r\n          } else {\r\n            return t\r\n          }\r\n        })\r\n        this.$emit('updateLikes')\r\n\r\n        this.isProcessing = false\r\n      } catch (error) {\r\n        console.error(error.message)\r\n        this.isProcessing = false\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法對 Tweet 取消 Like，請稍後再試'\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserPostList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserPostList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserPostList.vue?vue&type=template&id=1f69494d&\"\nimport script from \"./UserPostList.vue?vue&type=script&lang=js&\"\nexport * from \"./UserPostList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","_l","tweets","tweet","key","id","attrs","isCurrentUser","name","staticClass","_f","User","avatar","params","userId","UserId","_v","_s","account","createdAt","query","tweetId","description","on","$event","stopPropagation","preventDefault","showModal","require","replyCount","isLiked","unLike","addLike","likeCount","staticRenderFns","mixins","props","initialTweets","type","required","data","computed","mapState","watch","newValue","methods","toAvatar","toName","toAccount","toCreatedAt","toDescription","myAvatar","usersAPI","obj","JSON","arr","Object","t","console","Toast","icon","title","component"],"sourceRoot":""}