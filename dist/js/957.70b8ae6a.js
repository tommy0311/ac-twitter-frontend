"use strict";(self["webpackChunkalphitter"]=self["webpackChunkalphitter"]||[]).push([[957],{55957:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});s(68309),s(82526),s(41817);var r=function(){var e=this,t=e._self._c;return t("div",e._l(e.likes,(function(r){return t("div",{key:r.id,attrs:{id:"user-like-list-container"}},[e.currentUser.id===r.Tweet.User.id?t("router-link",{attrs:{to:{name:"user-tweets"}}},[t("img",{staticClass:"user-headshot",attrs:{src:e._f("emptyImage")(r.Tweet.User.avatar),alt:"個人頭像"}})]):t("router-link",{attrs:{to:{name:"user-id-tweets",params:{userId:r.Tweet.User.id}}}},[t("img",{staticClass:"user-headshot",attrs:{src:e._f("emptyImage")(r.Tweet.User.avatar),alt:"個人頭像"}})]),t("div",{staticClass:"tweet-wrapper ml-2"},[t("div",{staticClass:"d-flex align-items-center"},[e.currentUser.id===r.Tweet.User.id?t("router-link",{attrs:{to:{name:"user-tweets"}}},[t("span",{staticClass:"user-name"},[e._v(" "+e._s(r.Tweet.User.name)+" ")]),t("span",{staticClass:"user-acount-for-post ml-2"},[t("span",[e._v("@")]),e._v(" "+e._s(r.Tweet.User.account)+" "),t("span",[e._v(" • ")])])]):t("router-link",{attrs:{to:{name:"user-id-tweets",params:{userId:r.Tweet.User.id}}}},[t("span",{staticClass:"user-name"},[e._v(" "+e._s(r.Tweet.User.name)+" ")]),t("span",{staticClass:"user-acount-for-post ml-2"},[t("span",[e._v("@")]),e._v(" "+e._s(r.Tweet.User.account)+" "),t("span",[e._v(" • ")])])]),t("p",{staticClass:"post-time"},[e._v(" "+e._s(e._f("fromNow")(r.Tweet.createdAt))+" ")])],1),t("router-link",{attrs:{to:{name:"replylist",query:{tweetId:r.Tweet.id}}}},[t("p",{staticClass:"tweet-content mt-2"},[e._v(" "+e._s(r.Tweet.description)+" ")])]),t("div",{staticClass:"tweet-icon-show-pannel d-flex mt-1"},[t("div",{staticClass:"d-flex align-items-center"},[t("button",{staticClass:"d-flex",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.showModal(r.Tweet.id,r.Tweet.User.avatar,r.Tweet.User.name,r.Tweet.User.account,r.Tweet.createdAt,r.Tweet.description)}}},[t("img",{staticClass:"tweet-icon-show",attrs:{src:s(63461),alt:""}}),t("span",{staticClass:"reply-number ml-1"},[e._v(" "+e._s(r.Tweet.replyCount)+" ")])])]),t("div",{staticClass:"d-flex align-items-center ml-8"},[r.isLiked?t("button",[t("img",{staticClass:"tweet-icon-show like-icon",attrs:{src:s(68665),alt:"likedx2.png"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.unLike(r.TweetId)}}})]):t("button",[t("img",{staticClass:"tweet-icon-show like-icon",attrs:{src:s(66159),alt:"like.png"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addLike(r.TweetId)}}})]),t("span",{staticClass:"like-number ml-1"},[e._v(" "+e._s(r.Tweet.likeCount)+" ")])])])],1)],1)})),0)},a=[],i=s(50124),n=s(48534),o=s(4648),c=(s(21703),s(96647),s(83459)),l=s(78390),u=s(76163),d=s(63822);const p={name:"UserLikeList",mixins:[c.qk,c.Lf],props:{initialLikes:{type:Array,required:!0}},data:function(){return{likes:this.initialLikes}},computed:(0,o.Z)({},(0,d.rn)(["currentUser"])),watch:{initialLikes:function(e){this.likes=(0,o.Z)((0,o.Z)({},this.likes),e),this.likes=e}},methods:{showModal:function(e,t,s,r,a,i){console.log("showModal"),this.$store.commit("setReply",{tweetId:e,toAvatar:t,toName:s,toAccount:r,toCreatedAt:a,toDescription:i,myAvatar:this.currentUser.avatar})},addLike:function(e){var t=this;return(0,n.Z)((0,i.Z)().mark((function s(){var r,a;return(0,i.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.isProcessing=!0,s.next=4,l.Z.addLike({tweetId:e});case 4:if(r=s.sent,a=r.data,"error"!==a.status){s.next=8;break}throw new Error(a.message);case 8:t.$emit("updateLikes"),t.isProcessing=!1,s.next=17;break;case 12:s.prev=12,s.t0=s["catch"](0),console.error(s.t0.message),t.isProcessing=!1,u.FN.fire({icon:"error",title:"無法對 Tweet 按 Like，請稍後再試"});case 17:case"end":return s.stop()}}),s,null,[[0,12]])})))()},unLike:function(e){var t=this;return(0,n.Z)((0,i.Z)().mark((function s(){var r,a;return(0,i.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.isProcessing=!0,s.next=4,l.Z.unLike({tweetId:e});case 4:if(r=s.sent,a=r.data,"error"!==a.status){s.next=8;break}throw new Error(a.message);case 8:t.$emit("updateLikes"),t.isProcessing=!1,s.next=17;break;case 12:s.prev=12,s.t0=s["catch"](0),console.error(s.t0.message),t.isProcessing=!1,u.FN.fire({icon:"error",title:"無法對 Tweet 取消 Like，請稍後再試"});case 17:case"end":return s.stop()}}),s,null,[[0,12]])})))()}}},w=p;var m=s(1001),k=(0,m.Z)(w,r,a,!1,null,null,null);const v=k.exports}}]);
//# sourceMappingURL=957.70b8ae6a.js.map