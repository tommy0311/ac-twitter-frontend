"use strict";(self["webpackChunkalphitter"]=self["webpackChunkalphitter"]||[]).push([[102],{63102:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v});r(68309);var s=function(){var e=this,t=e._self._c;return t("div",e._l(e.followers,(function(r){return t("div",{key:r.followerId,attrs:{id:"user-follower-list-container"}},[r.isFollowed?t("button",{staticClass:"user-follow-btn empty-btn-style-active",attrs:{type:"submit"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.removeFollowing(r.followerId)}}},[e._v(" 正在跟隨 ")]):t("button",{staticClass:"user-follow-btn empty-btn-style",attrs:{type:"submit"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addFollowing(r.followerId)}}},[e._v(" 跟隨 ")]),e.currentUser.id===r.followerId?t("router-link",{attrs:{to:{name:"user-tweets"}}},[t("img",{staticClass:"user-headshot",attrs:{src:e._f("emptyImage")(r.avatar),alt:"個人頭像"}})]):t("router-link",{attrs:{to:{name:"user-id-tweets",params:{userId:r.followerId}}}},[t("img",{staticClass:"user-headshot",attrs:{src:e._f("emptyImage")(r.avatar),alt:"個人頭像"}})]),t("div",{staticClass:"ml-2"},[e.currentUser.id===r.followerId?t("router-link",{attrs:{to:{name:"user-tweets"}}},[t("span",{staticClass:"user-name"},[e._v(" "+e._s(r.name)+" ")]),t("div",{staticClass:"user-acount"},[t("span",[e._v("@")]),e._v(" "+e._s(r.account)+" ")]),t("p",{staticClass:"tweet-content mt-4"},[e._v(" "+e._s(r.introduction)+" ")])]):t("router-link",{attrs:{to:{name:"user-id-tweets",params:{userId:r.followerId}}}},[t("span",{staticClass:"user-name"},[e._v(" "+e._s(r.name)+" ")]),t("div",{staticClass:"user-acount"},[t("span",[e._v("@")]),e._v(" "+e._s(r.account)+" ")]),t("p",{staticClass:"tweet-content mt-4"},[e._v(" "+e._s(r.introduction)+" ")])])],1)],1)})),0)},o=[],a=r(50124),n=r(48534),l=r(4648),i=(r(38862),r(26833),r(83459)),c=r(76163),u=r(78390),f=r(63822);const w={name:"UserFollowerList",mixins:[i.Lf],props:{initialFollowers:{type:Array,required:!0}},data:function(){return{followers:this.initialFollowers}},computed:(0,l.Z)({},(0,f.rn)(["currentUser"])),watch:{initialFollowers:function(e){this.followers=(0,l.Z)((0,l.Z)({},this.followers),e),this.followers=e}},methods:{addFollowing:function(e){var t=this;return(0,n.Z)((0,a.Z)().mark((function r(){var s,o,n,l,i,f,w;return(0,a.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,e!==t.currentUser.id){r.next=4;break}return c.FN.fire({icon:"error",title:"無法跟隨自己"}),r.abrupt("return");case 4:return t.isProcessing=!0,r.next=7,u.Z.addFollowing({userId:e});case 7:s=r.sent,o=s.data,console.log("data=",o),n=JSON.parse(JSON.stringify(t.followers)),l=Object.values(n),i=0,f=l;case 13:if(!(i<f.length)){r.next=21;break}if(w=f[i],w.followerId!==e){r.next=18;break}return w.isFollowed=!0,r.abrupt("break",21);case 18:i++,r.next=13;break;case 21:t.followers=l,t.$emit("fromFollowerList"),t.isProcessing=!1,r.next=31;break;case 26:r.prev=26,r.t0=r["catch"](0),console.error(r.t0.message),t.isProcessing=!1,c.FN.fire({icon:"error",title:"目前無法跟隨使用者，請稍後再試"});case 31:case"end":return r.stop()}}),r,null,[[0,26]])})))()},removeFollowing:function(e){var t=this;return(0,n.Z)((0,a.Z)().mark((function r(){var s,o,n,l,i,f,w;return(0,a.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,r.next=4,u.Z.removeFollowing({userId:e});case 4:s=r.sent,o=s.data,console.log("data=",o),n=JSON.parse(JSON.stringify(t.followers)),l=Object.values(n),i=0,f=l;case 10:if(!(i<f.length)){r.next=18;break}if(w=f[i],w.followerId!==e){r.next=15;break}return w.isFollowed=!1,r.abrupt("break",18);case 15:i++,r.next=10;break;case 18:t.followers=l,t.$emit("fromFollowerList"),t.isProcessing=!1,r.next=28;break;case 23:r.prev=23,r.t0=r["catch"](0),console.error(r.t0.message),t.isProcessing=!1,c.FN.fire({icon:"error",title:"目前無法取消跟隨使用者，請稍後再試"});case 28:case"end":return r.stop()}}),r,null,[[0,23]])})))()}}},d=w;var p=r(43736),m=(0,p.Z)(d,s,o,!1,null,null,null);const v=m.exports}}]);
//# sourceMappingURL=102.3d2a8595.js.map