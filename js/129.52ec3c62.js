"use strict";(self["webpackChunkalphitter"]=self["webpackChunkalphitter"]||[]).push([[129],{53129:(t,e,s)=>{s.r(e),s.d(e,{default:()=>k});s(68309),s(82526),s(41817);var r=function(){var t=this,e=t._self._c;return e("div",t._l(t.tweets,(function(r){return e("div",{key:r.id,attrs:{id:"user-post-list-container"}},[r.isCurrentUser?e("router-link",{attrs:{to:{name:"user-tweets"}}},[e("img",{staticClass:"user-headshot",attrs:{src:t._f("emptyImage")(r.User.avatar),alt:"個人頭像"}})]):e("router-link",{attrs:{to:{name:"user-id-tweets",params:{userId:r.UserId}}}},[e("img",{staticClass:"user-headshot",attrs:{src:t._f("emptyImage")(r.User.avatar),alt:"個人頭像"}})]),e("div",{staticClass:"tweet-wrapper ml-2"},[e("div",{staticClass:"d-flex align-items-center"},[r.isCurrentUser?e("router-link",{staticClass:"user-name",attrs:{to:{name:"user-tweets"}}},[t._v(" "+t._s(r.User.name)+" "),e("span",{staticClass:"user-acount-for-post ml-2"},[e("span",[t._v("@")]),t._v(" "+t._s(r.User.account)+" "),e("span",[t._v(" • ")])])]):e("router-link",{staticClass:"user-name",attrs:{to:{name:"user-id-tweets",params:{userId:r.UserId}}}},[t._v(" "+t._s(r.User.name)+" "),e("span",{staticClass:"user-acount-for-post ml-2"},[e("span",[t._v("@")]),t._v(" "+t._s(r.User.account)+" "),e("span",[t._v(" • ")])])]),e("p",{staticClass:"post-time"},[t._v(" "+t._s(t._f("fromNow")(r.createdAt))+" ")])],1),e("router-link",{attrs:{to:{name:"replylist",query:{tweetId:r.id}}}},[e("p",{staticClass:"tweet-content mt-2"},[t._v(" "+t._s(r.description)+" ")])]),e("div",{staticClass:"tweet-icon-show-pannel d-flex mt-1"},[e("button",{staticClass:"d-flex align-items-center",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.showModal(r.id,r.User.avatar,r.User.name,r.User.account,r.createdAt,r.description)}}},[e("img",{staticClass:"tweet-icon-show",attrs:{src:s(63461),alt:"回覆按鈕"}}),e("span",{staticClass:"reply-number ml-1"},[t._v(" "+t._s(r.replyCount)+" ")])]),e("div",{staticClass:"d-flex align-items-center ml-8"},[r.isLiked?e("button",[e("img",{staticClass:"tweet-icon-show",attrs:{src:s(68665),alt:"likedx2.png"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.unLike(r.id)}}})]):e("button",[e("img",{staticClass:"tweet-icon-show",attrs:{src:s(66159),alt:"like.png"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addLike(r.id)}}})]),e("span",{staticClass:"like-number ml-1"},[t._v(" "+t._s(r.likeCount)+" ")])])])],1)],1)})),0)},a=[],i=s(50124),n=s(48534),o=s(4648),c=(s(21703),s(96647),s(38862),s(26833),s(21249),s(83459)),u=s(78390),l=s(76163),p=s(63822);const d={name:"UserPostList",mixins:[c.qk,c.Lf],props:{initialTweets:{type:Array,required:!0}},data:function(){return{tweets:this.initialTweets}},computed:(0,o.Z)({},(0,p.rn)(["currentUser"])),watch:{initialTweets:function(t){this.tweets=(0,o.Z)((0,o.Z)({},this.tweets),t)}},methods:{showModal:function(t,e,s,r,a,i){this.$store.commit("setReply",{tweetId:t,toAvatar:e,toName:s,toAccount:r,toCreatedAt:a,toDescription:i,myAvatar:this.currentUser.avatar})},addLike:function(t){var e=this;return(0,n.Z)((0,i.Z)().mark((function s(){var r,a,n,c;return(0,i.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isProcessing=!0,s.next=4,u.Z.addLike({tweetId:t});case 4:if(r=s.sent,a=r.data,"error"!==a.status){s.next=8;break}throw new Error(a.message);case 8:n=JSON.parse(JSON.stringify(e.tweets)),c=Object.values(n),e.tweets=c.map((function(e){return e.id===t?(0,o.Z)((0,o.Z)({},e),{},{isLiked:!0,likeCount:e.likeCount+1}):e})),e.$emit("updateLikes"),e.isProcessing=!1,s.next=20;break;case 15:s.prev=15,s.t0=s["catch"](0),console.error(s.t0.message),e.isProcessing=!1,l.FN.fire({icon:"error",title:"無法對 Tweet 按 Like，請稍後再試"});case 20:case"end":return s.stop()}}),s,null,[[0,15]])})))()},unLike:function(t){var e=this;return(0,n.Z)((0,i.Z)().mark((function s(){var r,a,n,c;return(0,i.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isProcessing=!0,s.next=4,u.Z.unLike({tweetId:t});case 4:if(r=s.sent,a=r.data,"error"!==a.status){s.next=8;break}throw new Error(a.message);case 8:n=JSON.parse(JSON.stringify(e.tweets)),c=Object.values(n),e.tweets=c.map((function(e){return e.id===t?(0,o.Z)((0,o.Z)({},e),{},{isLiked:!1,likeCount:e.likeCount-1}):e})),e.$emit("updateLikes"),e.isProcessing=!1,s.next=20;break;case 15:s.prev=15,s.t0=s["catch"](0),console.error(s.t0.message),e.isProcessing=!1,l.FN.fire({icon:"error",title:"無法對 Tweet 取消 Like，請稍後再試"});case 20:case"end":return s.stop()}}),s,null,[[0,15]])})))()}}},m=d;var w=s(43736),v=(0,w.Z)(m,r,a,!1,null,null,null);const k=v.exports}}]);
//# sourceMappingURL=129.52ec3c62.js.map