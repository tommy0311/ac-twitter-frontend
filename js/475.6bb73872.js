"use strict";(self["webpackChunkalphitter"]=self["webpackChunkalphitter"]||[]).push([[475],{37438:(e,t,s)=>{s.d(t,{Z:()=>w});s(68309);var r=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"relative"}},[e.replyModalShow?t("PopoutReply"):e._e(),e.writingTweetModalShow?t("PopoutWritingTweet"):e._e(),t("div",{attrs:{id:"navpillHeader-container"}},[e._m(0),t("div",{staticClass:"navpill-info-container flex-column"},[t("router-link",{staticClass:"navpillHeader-title",attrs:{to:{name:"user-tweets"}}},[e._v(" "+e._s(e.currentUser.name)+" ")]),t("p",{staticClass:"post-number-hint"},[e._v(" "+e._s(e.currentUser.tweetsCount)+" "),t("span",[e._v("推文")])])],1)])],1)},n=[function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"javascript:history.back()"}},[t("img",{staticClass:"arrow-icon",attrs:{src:s(57139),alt:"回到上一頁"}})])}],a=s(4648),i=s(63822),o=s(46031),c=s(49827);const l={name:"NavpillHeader",components:{PopoutReply:o["default"],PopoutWritingTweet:c["default"]},data:function(){return{isLoading:!0}},computed:(0,a.Z)({},(0,i.rn)(["currentUser","replyModalShow","writingTweetModalShow"]))},u=l;var d=s(43736),p=(0,d.Z)(u,r,n,!1,null,null,null);const w=p.exports},55475:(e,t,s)=>{s.r(t),s.d(t,{default:()=>B});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex justify-content-center"},[t("NavBar",{attrs:{"initial-main-page":e.isMainPage}}),t("div",{staticClass:"main-wrapper"},[t("NavpillHeader"),t("div",{staticClass:"container-for-scroll scrollbar"},[t("ReplyPost",{attrs:{"initial-tweetid":e.tweetId,tweet:e.tweet,"add-like":e.addLike,"un-like":e.unLike}}),e.isLoading?t("LoadingSpinner"):e._l(e.replies,(function(s){return t("PostReplyList",{key:s.id,attrs:{"initial-reply":s,"initial-tweetid":e.tweetId}})}))],2)],1),t("div",{attrs:{id:"recommendColumn-container"}},[e._m(0),e.isRecommendUsersLoading?t("LoadingSpinner"):t("RecommendColumn",{attrs:{"initial-recommend-users":e.recommendUsers},on:{updateRecommendColumn:e.updatePage}})],1),t("router-view",{attrs:{tweet:e.tweet,"fetch-tweet":e.fetchTweet,"fetch-replies":e.fetchReplies}})],1)},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"recommendHeader"},[t("h1",[e._v("推薦跟隨")])])}],a=s(50124),i=s(48534),o=s(4648),c=(s(9653),s(21249),s(5212),s(41539),s(21703),s(96647),s(48164)),l=s(75676),u=s(37438),d=(s(68309),s(82526),s(41817),function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"reply-post-container"}},[t("div",{staticClass:"d-flex"},[e.currentUser.id===e.tweet.User.id?t("router-link",{staticClass:"d-flex",attrs:{to:{name:"user-tweets"}}},[t("img",{staticClass:"user-headshot",attrs:{src:e._f("emptyImage")(e.tweet.User.avatar),alt:"個人頭像"}}),t("div",{staticClass:"flex-column ml-2"},[t("span",{staticClass:"user-name"},[e._v(" "+e._s(e.tweet.User.name)+" ")]),t("p",{staticClass:"user-acount-for-post"},[t("span",[e._v("@")]),e._v(" "+e._s(e.tweet.User.account)+" ")])])]):t("router-link",{staticClass:"d-flex",attrs:{to:{name:"user-id-tweets",params:{userId:e.tweet.User.id}}}},[t("img",{staticClass:"user-headshot",attrs:{src:e._f("emptyImage")(e.tweet.User.avatar),alt:"個人頭像"}}),t("div",{staticClass:"flex-column ml-2"},[t("span",{staticClass:"user-name"},[e._v(" "+e._s(e.tweet.User.name)+" ")]),t("p",{staticClass:"user-acount-for-post"},[t("span",[e._v("@")]),e._v(" "+e._s(e.tweet.User.account)+" ")])])])],1),t("p",{staticClass:"tweet-content mt-2"},[e._v(" "+e._s(e.tweet.description)+" ")]),t("div",{staticClass:"tweet-post-time-pannel d-flex mt-2"},[t("p",{staticClass:"post-time"},[e._v(" "+e._s(e._f("localeSupport")(e.tweet.createdAt))+" ")])]),t("div",{staticClass:"reply-like-number-container d-flex mt-2"},[t("p",[t("span",{staticClass:"tweet-reply-number"},[e._v(" "+e._s(e.tweet.replyCount)+" ")]),e._v(" 回覆 ")]),t("p",{staticClass:"ml-6"},[t("span",{staticClass:"tweet-like-number"},[e._v(" "+e._s(e.tweet.likeCount)+" ")]),e._v(" 喜歡次數 ")])]),t("div",{staticClass:"tweet-icon-show-pannel d-flex mt-1"},[t("button",{staticClass:"d-flex",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.showModal(e.tweet.id,e.tweet.User.avatar,e.tweet.User.name,e.tweet.User.account,e.tweet.createdAt,e.tweet.description)}}},[t("img",{staticClass:"tweet-icon-show",attrs:{src:s(63461),alt:"回覆按鈕"}})]),e.tweet.isLiked?t("button",[t("img",{staticClass:"tweet-icon-show like-icon",attrs:{src:s(68665),alt:"likedx2.png"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.unLike(e.tweet.id)}}})]):t("button",[t("img",{staticClass:"tweet-icon-show like-icon",attrs:{src:s(66159),alt:"like.png"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addLike(e.tweet.id)}}})])])])}),p=[],w=s(83459),m=s(63822);const v={name:"ReplyPost",mixins:[w.L,w.Lf],props:{tweet:{type:Object,require:!0},addLike:{type:Function,require:!0},unLike:{type:Function,require:!0}},data:function(){return{}},computed:(0,o.Z)({},(0,m.rn)(["currentUser"])),methods:{showModal:function(e,t,s,r,n,a){this.$store.commit("setReply",{tweetId:e,toAvatar:t,toName:s,toAccount:r,toCreatedAt:n,toDescription:a,myAvatar:this.currentUser.avatar})}}},f=v;var h=s(43736),g=(0,h.Z)(f,d,p,!1,null,null,null);const C=g.exports;var _=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"reply-post-list-container"}},[e.isCurrentUser?t("router-link",{attrs:{to:{name:"user-tweets"}}},[t("img",{staticClass:"user-headshot",attrs:{src:e._f("emptyImage")(e.reply.User.avatar),alt:"個人頭像"}})]):t("router-link",{attrs:{to:{name:"user-id-tweets",params:{userId:e.reply.User.id}}}},[t("img",{staticClass:"user-headshot",attrs:{src:e._f("emptyImage")(e.reply.User.avatar),alt:"個人頭像"}})]),t("div",{staticClass:"tweet-wrapper ml-2"},[t("div",{staticClass:"d-flex align-items-center"},[e.isCurrentUser?t("router-link",{staticClass:"user-name",attrs:{to:{name:"user-tweets"}}},[e._v(" "+e._s(e.reply.User.name)+" "),t("span",{staticClass:"user-acount-for-post ml-2"},[t("span",[e._v("@")]),e._v(" "+e._s(e.reply.User.account)+" "),t("span",[e._v(" • ")])])]):t("router-link",{staticClass:"user-name",attrs:{to:{name:"user-id-tweets",params:{userId:e.reply.User.id}}}},[e._v(" "+e._s(e.reply.User.name)+" "),t("span",{staticClass:"user-acount-for-post ml-2"},[t("span",[e._v("@")]),e._v(" "+e._s(e.reply.User.account)+" "),t("span",[e._v(" • ")])])]),t("p",{staticClass:"post-time"},[e._v(" "+e._s(e._f("fromNow")(e.reply.createdAt))+" ")])],1),t("div",{staticClass:"reply-to-who-container d-flex mt-2"},[e._v(" 回覆 "),e.currentUser.id===e.tweet.User.id?t("router-link",{attrs:{to:{name:"user-tweets"}}},[t("span",{staticClass:"reply-to-who-acount ml-1"},[t("span",[e._v("@")]),e._v(" "+e._s(e.tweet.User.account)+" ")])]):t("router-link",{attrs:{to:{name:"user-id-tweets",params:{userId:e.tweet.User.id}}}},[t("span",{staticClass:"reply-to-who-acount ml-1"},[t("span",[e._v("@")]),e._v(" "+e._s(e.tweet.User.account)+" ")])])],1),t("p",{staticClass:"tweet-content mt-2"},[e._v(" "+e._s(e.reply.comment)+" ")])])],1)},U=[],k=s(88431),A=s(76163);const y={name:"PostReplyList",mixins:[w.qk,w.Lf],props:{initialTweetid:{type:Number,required:!0},initialReply:{type:Object,required:!0}},data:function(){return{tweet:{},reply:this.initialReply,isCurrentUser:!1}},computed:(0,o.Z)({},(0,m.rn)(["currentUser"])),created:function(){this.isCurrentUser=this.reply.UserId===this.currentUser.id,this.fetchTweet({tweetId:this.initialTweetid})},methods:{fetchTweet:function(e){var t=this;return(0,i.Z)((0,a.Z)().mark((function s(){var r,n,i;return(0,a.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=e.tweetId,s.prev=1,t.isLoading=!0,s.next=5,k.Z.getTweet({tweetId:r});case 5:n=s.sent,i=n.data,t.tweet=i,console.log("tweet=",t.tweet),t.isLoading=!1,s.next=17;break;case 12:s.prev=12,s.t0=s["catch"](1),console.error(s.t0),t.isLoading=!1,A.FN.fire({icon:"error",title:"無法取得 Tweet 資料，請稍後再試"});case 17:case"end":return s.stop()}}),s,null,[[1,12]])})))()}}},Z=y;var x=(0,h.Z)(Z,_,U,!1,null,null,null);const L=x.exports;var R=s(24239),I=s(78390),b=s(64396);const P={name:"ReplyList",components:{NavBar:c.Z,RecommendColumn:l.Z,NavpillHeader:u.Z,ReplyPost:C,PostReplyList:L,LoadingSpinner:b.Z},data:function(){return{replies:[],tweetId:-1,currentUser:R.Z.state.currentUser,tweet:{},recommendUsers:[],isProcessing:!1,isMainPage:!0,isLoading:!0,isRecommendUsersLoading:!0}},computed:(0,o.Z)({},(0,m.rn)(["currentUser"])),created:function(){var e=this.$route.query.tweetId,t=void 0===e?"":e;this.passTweetId(Number(t)),this.fetchRecommendUsers(),this.fetchTweet(Number(t)),this.fetchReplies(Number(t))},methods:{passTweetId:function(e){this.tweetId=e},updatePage:function(){this.fetchRecommendUsers()},fetchRecommendUsers:function(){var e=this;return(0,i.Z)((0,a.Z)().mark((function t(){var s,r,n,i;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isRecommendUsersLoading=!0,t.next=4,I.Z.getUserFollowings({userId:e.currentUser.id});case 4:return s=t.sent,r=s.data,n=r,t.next=9,I.Z.getTopUsers();case 9:i=t.sent,e.recommendUsers=i.data.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{isFollowed:n.some((function(t){return t.followingId===e.id}))})})),e.isRecommendUsersLoading=!1,t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](0),console.error(t.t0),e.isRecommendUsersLoading=!1,A.FN.fire({icon:"error",title:"無法取得 RecommendUsers 資料，請稍後再試"});case 19:case"end":return t.stop()}}),t,null,[[0,14]])})))()},fetchTweet:function(e){var t=this;return(0,i.Z)((0,a.Z)().mark((function s(){var r,n,i;return(0,a.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,I.Z.getUserLikes({userId:t.currentUser.id});case 3:return r=s.sent,t.currentUserLikes=r.data,s.next=7,k.Z.getTweet({tweetId:e});case 7:n=s.sent,i=n.data,t.tweet=i,t.tweet.isLiked=!!t.currentUserLikes.some((function(e){return e.TweetId===t.tweet.id})),s.next=16;break;case 13:s.prev=13,s.t0=s["catch"](0),A.FN.fire({icon:"error",title:"無法取得 Tweet 資料，請稍後再試"});case 16:case"end":return s.stop()}}),s,null,[[0,13]])})))()},fetchReplies:function(e){var t=this;return(0,i.Z)((0,a.Z)().mark((function s(){var r,n;return(0,a.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.isLoading=!0,s.next=4,k.Z.getReplies({tweetId:e});case 4:r=s.sent,n=r.data,t.replies=n,t.isLoading=!1,s.next=15;break;case 10:s.prev=10,s.t0=s["catch"](0),console.error(s.t0),t.isLoading=!1,A.FN.fire({icon:"error",title:"無法取得 Replies 資料，請稍後再試"});case 15:case"end":return s.stop()}}),s,null,[[0,10]])})))()},addLike:function(e){var t=this;return(0,i.Z)((0,a.Z)().mark((function s(){var r,n;return(0,a.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.isProcessing=!0,s.next=4,I.Z.addLike({tweetId:e});case 4:if(r=s.sent,n=r.data,console.log("data=",n),"error"!==n.status){s.next=9;break}throw new Error(n.message);case 9:t.tweet=(0,o.Z)((0,o.Z)({},t.tweet),{},{isLiked:!0,likeCount:t.tweet.likeCount+1}),t.isProcessing=!1,s.next=18;break;case 13:s.prev=13,s.t0=s["catch"](0),console.error(s.t0.message),t.isProcessing=!1,A.FN.fire({icon:"error",title:"無法對 Tweet 按 Like，請稍後再試"});case 18:case"end":return s.stop()}}),s,null,[[0,13]])})))()},unLike:function(e){var t=this;return(0,i.Z)((0,a.Z)().mark((function s(){var r,n;return(0,a.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.isProcessing=!0,s.next=4,I.Z.unLike({tweetId:e});case 4:if(r=s.sent,n=r.data,console.log("data=",n),"error"!==n.status){s.next=9;break}throw new Error(n.message);case 9:t.tweet=(0,o.Z)((0,o.Z)({},t.tweet),{},{isLiked:!1,likeCount:t.tweet.likeCount-1}),t.isProcessing=!1,s.next=18;break;case 13:s.prev=13,s.t0=s["catch"](0),console.error(s.t0.message),t.isProcessing=!1,A.FN.fire({icon:"error",title:"無法對 Tweet 取消 Like，請稍後再試"});case 18:case"end":return s.stop()}}),s,null,[[0,13]])})))()}}},T=P;var N=(0,h.Z)(T,r,n,!1,null,null,null);const B=N.exports},57139:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAOCAYAAADJ7fe0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABTSURBVHgBrdLRCQAgCATQo0ncfylHKRTqQwrM88Cojx6UYl6iqlNEvDLBCwBQQyJg5y+kChyEARxhAUc2UC27P9CRlufYQn/s3tAtZqH+sY9QFlmZh9qG/+G4HQAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=475.6bb73872.js.map