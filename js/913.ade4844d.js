"use strict";(self["webpackChunkalphitter"]=self["webpackChunkalphitter"]||[]).push([[913],{90913:(t,e,a)=>{a.r(e),a.d(e,{default:()=>g});var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"admin-login-container"}},[e("img",{staticClass:"logo-img",attrs:{src:a(82374),alt:""}}),e("h1",[t._v("後台登入")]),e("form",{staticClass:"form-container",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSubmit.apply(null,arguments)}}},[e("div",{staticClass:"form-element-group"},[e("label",{attrs:{for:"admin-account"}},[t._v("帳號")]),t.account.length>10?e("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"admin-account",staticStyle:{"border-bottom":"2px solid red"},attrs:{id:"admin-account",type:"text",placeholder:"請輸入帳號"},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"admin-account",attrs:{id:"admin-account",type:"text",placeholder:"請輸入帳號"},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}}),e("span",{directives:[{name:"show",rawName:"v-show",value:t.account.length>10,expression:"account.length > 10"}],staticStyle:{position:"absolute",left:"0px",bottom:"-18px","font-size":"12px",color:"red"}},[t._v(" 字數超出上限！ ")]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.account.length,expression:"account.length"}],staticStyle:{position:"absolute",right:"0px",bottom:"-18px","font-size":"12px"}},[t._v(" "+t._s(t.account.length)+"/10 ")])]),e("div",{staticClass:"form-element-group"},[e("label",{attrs:{for:"admin-password"}},[t._v("密碼")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"admin-password",attrs:{id:"admin-password",type:"password",placeholder:"請輸入密碼"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),e("button",{staticClass:"login-btn main-btn-style",attrs:{type:"submit",disabled:t.isProcessing}},[t._v(" 登入 ")]),e("router-link",{staticClass:"submit-other-choice text-right",attrs:{to:{name:"login"}}},[t._v(" 前台登入 ")])],1)])},n=[],r=a(50124),o=a(48534),i=(a(21703),a(96647),a(77214)),c=a(76163),u=a(24239);const l={name:"AdminLogIn",data:function(){return{account:"",password:"",isProcessing:!1}},methods:{handleSubmit:function(){var t=this;return(0,o.Z)((0,r.Z)().mark((function e(){var a,s;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.account&&t.password){e.next=4;break}return c.FN.fire({icon:"warning",title:"請填入 account 和 password"}),e.abrupt("return");case 4:return t.isProcessing=!0,e.next=7,i.Z.adminSignIn({account:t.account,password:t.password});case 7:if(a=e.sent,s=a.data,"error"!==s.status){e.next=11;break}throw new Error(s.message);case 11:return localStorage.setItem("token",s.token),e.next=14,u.Z.dispatch("fetchCurrentUser");case 14:if(t.$store.commit("setCurrentUser",s.user),"user"!==s.user.role){e.next=22;break}return c.FN.fire({icon:"error",title:"帳號不存在"}),t.$store.commit("revokeAuthentication"),t.$router.push("/login"),e.abrupt("return");case 22:c.FN.fire({icon:"success",title:"管理者-".concat(t.account,"-登入成功")});case 23:t.$router.push("/admin/main"),e.next=32;break;case 26:e.prev=26,e.t0=e["catch"](0),t.password="",t.isProcessing=!1,"Error: User didn't exist!"===e.t0.message?e.t0.message="帳號不存在！":e.t0.message="輸入的帳號密碼有誤",c.FN.fire({icon:"warning",title:"".concat(e.t0.message)});case 32:case"end":return e.stop()}}),e,null,[[0,26]])})))()}}},p=l;var d=a(43736),m=(0,d.Z)(p,s,n,!1,null,null,null);const g=m.exports}}]);
//# sourceMappingURL=913.ade4844d.js.map